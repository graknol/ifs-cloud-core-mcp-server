client DeliveryStructure;
component PROJ;

-------------------------------- MAIN PAGES --------------------------------

page DeliveryStructureOverview using DeliveryStructures {
   label = "Delivery Structure Overview";
   
   list DeliveryStructureList using DeliveryStructures {
      label = "Delivery Structures";
      
      group DeliveryHeaderGroup {
         label = "Delivery Information";
         
         field DeliveryId;
         field DeliveryName;
         field ProjectId;
      }
   }
   
   group NavigationGroup {
      label = "Navigation";
      
      command NavigateToDelivery;
      command ViewProjectDetails;
   }
}

--------------------------------- DIALOGS ----------------------------------

dialog DeliveryDetailsDialog for DeliveryStructure {
   label = "Delivery Details";
   
   group DeliveryInfoGroup {
      label = "Basic Information";
      field DeliveryId;
      field DeliveryName;
   }
}

---------------------------------- LISTS -----------------------------------

list ProjectDeliverablesList using ProjectDeliverables {
   label = "Project Deliverables";
   
   field DeliverableId;
   field DeliverableName;
   field Status;
}

---------------------------- ENTITY SETS ----------------------------

entityset DeliveryStructures for DeliveryStructure {
   context Company(Company);
}

entityset ProjectDeliverables for ProjectDeliverable {
   context Company(Company);
   context DeliveryStructure(DeliveryId);
}

-------------------------------- ICONSETS --------------------------------

iconset DeliveryNavigatorIcons {
   icon_delivery = "fa-solid fa-truck";
   icon_project = "fa-solid fa-project-diagram";
   icon_deliverable = "fa-solid fa-box";
   icon_milestone = "fa-solid fa-flag-checkered";
   icon_task = "fa-solid fa-tasks";
   icon_resource = "fa-solid fa-users";
}

---------------------------------- TREES ----------------------------------

tree ProjectDeliverableNavigator using DeliveryStructures {
   label = "Project Deliverable Navigator";
   
   selector DeliveryStructureSelector;
   
   navicontext Company(Company) {
      icon = "company";
   }
   
   navicontext DeliveryStructure(DeliveryId) {
      icon = "icon_delivery";
      label = "${DeliveryName}";
      
      navigate ProjectDeliverable(DeliveryId) {
         icon = "icon_deliverable";
         label = "${DeliverableName}";
      }
   }
}

---------------------------- NAVIGATORS ----------------------------

navigator DeliveryExplorer {
   label = "Delivery Explorer";
   page = DeliveryStructureOverview;
   
   entry DeliveryStructures {
      label = "Delivery Structures";
      page = DeliveryStructureOverview;
   }
   
   entry ProjectDeliverables {
      label = "Project Deliverables";
      page = ProjectDeliverablesPage;
   }
}

---------------------------- NAVIGATION CONTEXTS ----------------------------

navicontext DeliveryWorkspace {
   selector = DeliveryStructureSelector;
   
   navigate DeliveryStructure {
      default = true;
      
      page DeliveryStructureOverview {
         label = "Overview";
      }
      
      page DeliveryDetailsPage {
         label = "Details";
      }
   }
}
